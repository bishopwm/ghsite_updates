!function(){var a=function(){$("html").trigger("windowResize")};$(window).on("resize",a)}(),function(){$(document).click("a",function(a){var b=$(a.target);"_blank"===b.attr("target")&&(a.preventDefault(),a.stopImmediatePropagation(),window.open(b.attr("href"),"_blank"))})}(),function(){var a=0,b=function(){$("html").trigger("windowScroll"),1>a?$("html").trigger("windowUserScroll"):a=Math.max(0,a-1)};$(window).on("scroll",b),$.fn.windowScrollTop=function(b){var c=$(window).scrollTop();return arguments.length>0?(c!==b&&(a++,$("html, body").scrollTop(b)),this):c},$.fn.animateWindowScrollTop=function(a,b){var c,d=this.data("_ani_wsp_")||$({}),e=this;return this.data("_ani_wsp_",d),d.attr("value",this.windowScrollTop()),b=_.extend({},b),c=b.step,b.step=function(a){e.windowScrollTop(a),c&&c.apply(this,arguments)},b.duration=300,b.easing="linear",d.stop().animate({value:a},b),this}}();var GH={};GH.sandbox=function(a){return a.call(null)},GH.Config={},GH.Utils={debounce:function(a,b,c){var d=_.debounce(a,b),e=_.bind(d,c);return e.cancel=d.cancel,e}},GH.Model=Backbone.Model.extend({page:"splash",popup:null}),GH.Router=Backbone.Router.extend({routes:{":page(/:popup)":"routeHandler"},initialize:function(a){this.model=a.model,this.page=null,this.listenTo(this.model,"change:page",this.pageChangeHandler)},pageChangeHandler:function(a,b){this.page!==b&&(this.page=b,this.model.set("popup",null),this.navigate(b))},routeHandler:function(a,b){this.page=a,this.model.set("page",a),this.model.set("popup",b)}}),GH.AccordionListView=Backbone.View.extend({el:".accordion-list",events:{"click .accordion-list-item-title":"makeItemActive"},makeItemActive:function(a){var b=$(a.currentTarget).closest(".accordion-list-item");b.addClass("active").siblings(".active").removeClass("active")}}),GH.HeaderView=Backbone.View.extend({el:".header",events:{"click .show-nav-list-btn":"showNavList"},initialize:function(){this.listenTo(this.model,"change:page",this.render)},toggleStickyHeader:function(a){this.$el.toggleClass("sticky",a)},render:function(){var a=this.model.get("page");this.$(".nav-item").each(function(){var b=$(this),c=b.hasClass(a);b.toggleClass("active",c)})},showNavList:function(a){a&&a.stopPropagation(),this.toggleNavList(!0)},hideNavList:function(){this.toggleNavList(!1)},toggleNavList:function(a){this.$(".nav-list").toggleClass("show",a),a?$(document).one("click.hideNavList",_.bind(this.hideNavList,this)):$(document).off("click.hideNavList")}}),GH.ViewportView=Backbone.View.extend({el:"html",events:{windowScroll:"windowScrollHandler",windowUserScroll:"windowUserScrollHandler"},initialize:function(){this.$el.windowScrollTop(0),this.headerView=new GH.HeaderView({model:this.model}),this.debounced={autoScrollToCurrentPage:GH.Utils.debounce(this.autoScrollToCurrentPage,1e3,this),updateModelFromMostVisiblePageEl:GH.Utils.debounce(this.updateModelFromMostVisiblePageEl,800,this)},this.listenTo(this.model,"change:page",this.pageChangeHandler),this.listenTo(this.model,"change:popup",this.popupChangeHandler),this.updatePagesMinHeight()},windowScrollHandler:function(){this.updateStickyHeader()},windowUserScrollHandler:function(){this.debounced.updateModelFromMostVisiblePageEl()},windowResizeHandler:function(){this.updatePagesMinHeight(),this.debounced.autoScrollToCurrentPage()},pageChangeHandler:function(){this.autoScrollToCurrentPage()},popupChangeHandler:function(){var a=this.model.get("popup");this.$el.toggleClass("no-scroll",!_.isEmpty(a))},updatePagesMinHeight:function(){var a=this.$el.height();this.$(".page").css("minHeight",a)},updateStickyHeader:function(){var a=this.$(".page.about"),b=a.position().top-this.$el.windowScrollTop();this.headerView.toggleStickyHeader(0>b)},autoScrollToCurrentPage:function(){var a,b,c=this.getCurrentPageEl();c&&(b=c.offset(),b&&(a=b.top,this.$el.animateWindowScrollTop(a)))},updateModelFromMostVisiblePageEl:function(){for(var a,b=this.$(".page"),c=.5*this.$el.height(),d=b.length;d--&&(a=b.eq(d),!(a.position().top-this.$el.windowScrollTop()<c)););this.model.set("page",a.data("name"))},getCurrentPageEl:function(){var a,b=this.model.get("page");return b&&(a=this.$(".page."+b)),a&&a.length>0?a:null}}),GH.OverlayView=Backbone.View.extend({el:".overlay",initialize:function(){this.popupView=new GH.PopupView({model:this.model}),this.listenTo(this.model,"change:page",this.pageChangeHandler),this.listenTo(this.model,"change:popup",this.popupChangeHandler)},pageChangeHandler:function(){var a=this.model.get("page");this.$(".overlay-close").attr("href","#"+a)},popupChangeHandler:function(){var a=this.model.get("popup"),b=!_.isEmpty(a);this.$el.toggleClass("opened",b)}}),GH.PopupView=Backbone.View.extend({el:".popup",events:{"popupContentShow .popup-content":"popupContentShowHandler","popupContentHide .popup-content":"popupContentHideHandler"},initialize:function(){this.listenTo(this.model,"change:popup",this.popupChangeHandler),this.$(".popup-viewport").scroll(_.bind(this.repositionCloseLink,this))},popupChangeHandler:function(){var a=this.model.get("popup"),b=this.model.get("page"),c=!b||!a;this.$(".popup-viewport").scrollTop(0),this.$(".popup-content").each(function(){var d,e=$(this),f=e.hasClass("show");d=c?!1:e.hasClass(b)&&e.hasClass(a),e.toggleClass("show",d),d!==f&&e.trigger(d?"popupContentShow":"popupContentHide")})},popupContentShowHandler:function(a){var b=$(a.target);b.find("iframe").each(function(){$(this).attr("src",$(this).data("src"))})},popupContentHideHandler:function(a){var b=$(a.target);b.find("iframe").each(function(){$(this).attr("src","")})},repositionCloseLink:function(a){var b=$(a.target);this.$(".popup-close-link").css({marginTop:b.scrollTop(),marginRight:-b.scrollLeft()})}}),GH.PageView=Backbone.View.extend({events:{"click .show-sub-page-btn":"showSubPage"},initialize:function(){this.$(".sub-page").length>0&&this.listenTo(this.model,"change:page",this.resetToMainPageIfNeeded)},showSubPage:function(a){var b=$(a.currentTarget);this.clearSubPageClasses(),this.$el.addClass(b.data("subPage"))},removeSubPageClassesHandler:function(a,b){return(b.match(/(^|\s)sub-page-\S+/g)||[]).join(" ")},clearSubPageClasses:function(){this.$el.removeClass(this.removeSubPageClassesHandler)},resetToMainPageIfNeeded:function(){var a=this.model.previous("page");this.$el.hasClass(a)&&this.clearSubPageClasses()}}),GH.SplashPageView=GH.PageView.extend({el:".page.splash",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments)}}),GH.AboutPageView=GH.PageView.extend({el:".page.about",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments)}}),GH.DifferencePageView=GH.PageView.extend({el:".page.difference",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments)}}),GH.PeoplePageView=GH.PageView.extend({el:".page.people",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments)}}),GH.CareersPageView=GH.PageView.extend({el:".page.careers",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments)}}),GH.ContactPageView=GH.PageView.extend({el:".page.contact",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments)}}),GH.HCGGroupPageView=GH.PageView.extend({el:".page.hcg-group",initialize:function(){GH.PageView.prototype.initialize.apply(this,arguments),this.embedIntroSwf()},embedIntroSwf:function(){var a={},b={};b.menu="false",b.wmode="transparent";var c={};c.align="left",swfobject.embedSWF("intro.swf","aniLogo","324","162","9.0.0",!1,a,b,c)}}),GH.AppView=Backbone.View.extend({el:".app",initialize:function(){this.viewportView=new GH.ViewportView({model:this.model}),this.$el.removeClass("loading"),this.listenTo(this.model,"change:page",this.updateAppClass)},updateAppClass:function(){var a=this.$el.data("currentClass"),b=this.model.get("page");a&&this.$el.removeClass(a),b&&(this.$el.addClass(b),this.$el.data("currentClass",b))}}),GH.sandbox(function(){$(function(){var a=new GH.Model,b={model:a};new GH.Router(b),new GH.SplashPageView(b),new GH.AboutPageView(b),new GH.DifferencePageView(b),new GH.PeoplePageView(b),new GH.CareersPageView(b),new GH.ContactPageView(b),new GH.HCGGroupPageView(b),new GH.AccordionListView(b),new GH.OverlayView(b),new GH.AppView(b),Backbone.history.start()})});